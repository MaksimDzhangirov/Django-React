# Современное приложение на Django: Часть 1: Настраиваем Django и React

## Введение

Данное учебное пособие будет состоять из нескольких частей и посвящено созданию "современного" веб-приложения или одностраничного приложения (SPA - single page application), используя Django и React.

Мы создадим приложение одностраничное приложение "Записная книжка", которое будет отображаться с помощью ReactJS и используем Django для создания API бэкэнда. Назовём наше приложение «ponynote», потому что пони популярные в сообществе Django.

Мы будем использовать несколько библиотек в этом проекте, в основном, `django-rest-framework` - чтобы упростить создание API, `agent-router-dom` - для маршрутизации приложения, `redux` - для отслеживания глобального состояния приложения.

Эта часть пособия посвящена настройке Вашего проекта, чтобы в дальнейшем без проблем использовать Django и React.

Код этого приложения находится на моём github аккаунте [v1k45/ponynote](https://github.com/v1k45/ponynote). Все изменения сделанные в этой части находятся в ветке `part-1`.

## Настраиваем окружение

Я предполагаю, что Вы сможете установить на своей машине Python3 и Node >=6 самостоятельно или используя инструкции, доступные в Интернете.

Я рекомендую Вам использовать python virualenv, чтобы зависимости, используемые в этом проекте, не конфликтовали с глобально установленной версией Python. Я использую [virtualenvwrapper](https://virtualenvwrapper.readthedocs.io/en/latest/), что позволяет запускать несколько виртуальных окружений на одной машине с помощью простых команд. Я буду использовать его в этом приложении.

## Настраиваем Django

После того как Вы создали и активировали Ваше виртуальное окружение, Вы можете установить Django с помощью следующей команды:

```
(ponynote)  $ pip install django
```
После установки Django мы создадим проект с название `ponynote`, используя инструмент `django-admin`.
```
(ponynote)  $ django-admin startproject ponynote
```
После чего будет сгенерирован следующий проект:
```
(ponynote)  $ tree
.
└── ponynote
    ├── manage.py
    └── ponynote
        ├── __init__.py
        ├── settings.py
        ├── urls.py
        └── wsgi.py

2 directories, 5 files
```
После осуществления миграций и запуска сервера для разработки, мы должны увидеть надпись приветственную надпись Dоango "It worked!" в браузере по адресу [http://127.0.0.1:8000](http://127.0.0.1:8000).

```
(ponynote)  $ cd ponynote
(ponynote)  $ ./manage.py migrate
(ponynote)  $ ./manage.py runserver
```

Теперь, когда Django установлен и готов к работе, пора настроить React JS.

## Настраиваем ReactJS с помощью Webpack

Если Вы раньше не слышали о Webpack, то в настоящий момент он является дефакто инструментом для сборки модулей, позволяя компилировать все ваши зависимости в несколько небольших файлов (обычно в один). Чтобы узнать больше о Webpack, перейдите на его [официальный сайт](https://webpack.js.org/).

Мы не будем сами конфигурировать Webpack, а воспользуемся `create-react-app` для создания шаблона проекта с уже настроенной конфигурацией. Воспринимайте `create-react-app` как команду `django-admin startproject`, но с гороздо большими возможностями.

Прежде всего надо установить `create-react-app` так, чтобы оно была доступно на уровне всей системы с помощью `npm`. Поскольку мы устанавливаем приложение на уровне всей системы, нам потребуются права суперпользователя.

```
$ sudo npm install -g create-react-app
```

После установки мы создадим приложение React, используя эту команду, а затем извлечем конфигурационные файлы, чтобы мы могли их редактировать сами вручную.

```
$ create-react-app frontend
$ cd frontend
$ npm run eject
```

После выполнения этих команд, мы получим следующую структуру файлов:

```
$ tree -I node_modules
.
├── config
│   ├── env.js
│   ├── jest
│   │   ├── cssTransform.js
│   │   └── fileTransform.js
│   ├── paths.js
│   ├── polyfills.js
│   ├── webpack.config.dev.js
│   ├── webpack.config.prod.js
│   └── webpackDevServer.config.js
├── package.json
├── public
│   ├── favicon.ico
│   ├── index.html
│   └── manifest.json
├── README.md
├── scripts
│   ├── build.js
│   ├── start.js
│   └── test.js
└── src
    ├── App.css
    ├── App.js
    ├── App.test.js
    ├── index.css
    ├── index.js
    ├── logo.svg
    └── registerServiceWorker.js

5 directories, 23 files
```

По названию каталогов достаточно легко понять где хранится какой файл.

Вы можете проверить работоспособность этого приложения, выполнив команду

```
$ npm run start
```

После её выполнения отобразится стандартное окно приветствия React.

По умолчанию сервер для разработки настроен так, что реагирует на изменения налету. Это означает, что любые изменения в исходных файлах будут мгновенно отображены в браузере, без необходимости обновлять страницу вручную.

## Интеграция React и Django

